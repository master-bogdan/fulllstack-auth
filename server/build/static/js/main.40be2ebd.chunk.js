(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{233:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(47),r=s(21),l=s.n(r),i=s(238),j=s(17),o=s(38),u=s(95),b=s.n(u),O=s(122),p=s(63),h=s(8),m=c.a.createContext({}),d=function(e){var t=e.children,s=Object(j.f)(),c=Object(a.useState)({}),n=Object(p.a)(c,2),r=n[0],l=n[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("user-auth");if(e){var t=JSON.parse(e);t?(l(t),s.push("/")):s.push("/login")}else s.push("/login")}),[s]),Object(h.jsx)(m.Provider,{value:{user:r,setUser:l},children:t})},x=s(124),f=s.n(x),g=s(235),y=s(239),v=s(237),w=s(136),I={labelCol:{span:8},wrapperCol:{span:16}},k={wrapperCol:{offset:8,span:16}},C=function(){var e=Object(a.useContext)(m).setUser,t=g.a.useForm(),s=Object(p.a)(t,1)[0],c=Object(j.f)(),n=Object(a.useState)(null),r=Object(p.a)(n,2),l=r[0],i=r[1],u=function(){var t=Object(O.a)(b.a.mark((function t(s){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post("/auth",s);case 3:a=t.sent,(n=a.data).success&&(localStorage.setItem("user-auth",JSON.stringify({auth:!0,name:n.username})),e({auth:!0,name:n.username}),c.push("/")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.data),i(t.t0.response.data.error);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)(g.a,Object(o.a)(Object(o.a)({},I),{},{form:s,name:"login",initialValues:{remember:!0},onFinish:u,children:[l&&Object(h.jsx)(g.a.Item,Object(o.a)(Object(o.a)({},k),{},{children:Object(h.jsx)(y.a,{message:l,type:"error",showIcon:!0})})),Object(h.jsx)(g.a.Item,{label:"Email",name:"email",type:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(h.jsx)(v.a,{})}),Object(h.jsx)(g.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(h.jsx)(v.a.Password,{})}),Object(h.jsx)(g.a.Item,Object(o.a)(Object(o.a)({},k),{},{children:Object(h.jsx)(w.a,{block:!0,type:"primary",htmlType:"submit",children:"Submit"})})),Object(h.jsx)(g.a.Item,Object(o.a)(Object(o.a)({},k),{},{children:Object(h.jsx)(w.a,{block:!0,type:"link",htmlType:"button",onClick:function(){s.setFieldsValue({email:"test@testmail.com",password:"12345"})},children:"Fill test login"})}))]}))},S=s(236),F=S.a.Title,P=S.a.Text,J=function(){var e=Object(j.f)(),t=Object(a.useContext)(m).user;return Object(h.jsxs)("div",{children:[Object(h.jsxs)(F,{style:{textAlign:"center"},level:2,children:[Object(h.jsx)(P,{children:"Hello"}),Object(h.jsx)("br",{}),Object(h.jsx)(P,{type:"success",children:t.name})]}),Object(h.jsx)(w.a,{onClick:function(){localStorage.setItem("user-auth",!1),e.push("/login")},type:"primary",block:!0,children:"Logout"})]})},T={height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},E=function(){return Object(h.jsx)(i.a,{style:T,children:Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{exact:!0,path:"/",component:J}),Object(h.jsx)(j.a,{path:"/login",component:C})]})})},q=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(E,{})})};s(232);l.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(n.a,{children:Object(h.jsx)(d,{children:Object(h.jsx)(q,{})})})}),document.getElementById("root"))}},[[233,1,2]]]);
//# sourceMappingURL=main.40be2ebd.chunk.js.map